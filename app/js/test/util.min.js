function int10(t){return parseInt(t,10)}var __extends=this.__extends||function(t,n){function e(){this.constructor=t}for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);e.prototype=n.prototype,t.prototype=new e};$.fn.x=$.fn.left=function(t){return void 0!==t?this.css("left",t):int10(this.css("left"))},$.fn.right=function(t){return void 0!==t?this.css("right",t):int10(this.css("right"))},$.fn.y=$.fn.top=function(t){return void 0!==t?this.css("top",t):int10(this.css("top"))},$.fn.bottom=function(t){return void 0!==t?this.css("bottom",t):int10(this.css("bottom"))},$.fn.xy=function(t,n){return this.css({left:t,top:n})},$.fn.w=function(t){return void 0!==t?this.css("width",t):int10(this.css("width"))},$.fn.h=function(t){return void 0!==t?this.css("height",t):int10(this.css("height"))},$.fn.wh=function(t,n){return int10(this.css({width:t,height:n}))},$.fn.xy=function(t,n){return this.css({top:n,left:t})},$.fn.z=function(t){return this.css("z-index",t)},$.fn.bounds=function(t,n,e,i){return this.css({left:t,top:n,width:e,height:i})},$.fn.alpha=function(t){return void 0!==t?this.css("opacity",t):this.css("opacity")},$.fn.visible=function(){return this.css("visibility","visible")},$.fn.hidden=function(){return this.css("visibility","hidden")},$.fn.block=function(){return this.css("display","block")},$.fn.none=function(){return this.css("display","none")},$.fn.css3Transform=function(t){return this.css({"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t,transform:t})},$.fn.rollover=function(){return this.each(function(){var t=$(this).find("img")[0];(new Image).src=t.src.replace(/(.gif$|.png$|.jpg$)/,"_on$1")}).hover(function(){var t=$(this).find("img")[0];t.src=t.src.replace("_on","").replace(/(.gif$|.png$|.jpg$)/,"_on$1")},function(){var t=$(this).find("img")[0];t.src=t.src.replace("_on","")})},Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var n=0,e=this.length;e>n;n++)if(this[n]==t)return n;return-1});var util;!function(t){var n=function(){function t(){}return t.prototype.done=function(t,n){return"function"==typeof t?this._done={obj:null,func:t}:"object"==typeof t&&"function"==typeof n&&(this._done={obj:t,func:n}),this},t.prototype.exec=function(){throw new Error("extend Command#exec")},t.prototype.__done=function(t){this._done&&this._done.func.call(this._done.obj,t||this)},t}();t.Command=n;var e=function(t){function n(){t.apply(this,arguments),this._commands=[]}return __extends(n,t),n.prototype.debug=function(){return this._debug="console"in window,this},n.prototype.queue=function(t,n){if("function"!=typeof t||n)if("object"==typeof t&&"function"==typeof n)this._commands.push({obj:t,func:n,type:"method"});else{if(!("object"==typeof t&&"__done"in t))throw new Error("[ Serial.queue ] argument is not command.");this._commands.push({obj:t,type:"command"})}else this._commands.push({obj:null,func:t,type:"function"});return this},n.prototype.func=function(t,n){return this.queue(t,n),this._commands[this._commands.length-1].auto=!0,this},n.prototype.auto=function(t,n){return this.func(t,n)},n.prototype.wait=function(t){var n=this;return this._commands.push({obj:this,type:"wait",func:function(){setTimeout(function(){n._commands.length?n._next():n.__done(n)},t)}}),this},n.prototype.exec=function(){var t=this;return setTimeout(function(){t._next()},1),this},n.prototype._next=function(){var t=this,n=this._commands.shift(),e=function(){t._debug&&console.log("command count : "+t._commands.length),t._commands.length?t._next():t.__done(t)};"command"===n.type?(!n.auto&&n.obj.done(e),n.obj.exec.call(n.obj),n.auto&&e()):n.auto?(n.func.call(n.obj),e()):n.func.call(n.obj,e)},n}(n);t.Serial=e;var i=function(t){function n(n){t.call(this),n&&this.setup(n)}return __extends(n,t),n.prototype.setup=function(t){return this._dataset=t,this},n.prototype.getDataset=function(){return this._dataset},n.prototype.getAt=function(t){return this._dataset[t]},n.prototype.isReady=function(){return!!this._dataset},n.prototype.size=function(){return this._dataset?this._dataset.length:0},n}(n);t.Assets=i;var o=function(t){function n(){t.apply(this,arguments),this._queue={},this._queuelist=[]}return __extends(n,t),n.prototype.queue=function(t,n){if(!n.isReady())throw new Error("AssetsQueue#add");return this._queue[t]=n,this._queuelist.push(n),this},n.prototype.getBy=function(t){return this._queue[t]},n.prototype.exec=function(){var t=this,n=this._queuelist.shift();return n.done(function(){0==t._queuelist.length?t.__done(t):t.exec()}).exec(),this},n}(n);t.AssetsQueue=o;var r=function(t){function n(){t.apply(this,arguments),this._ids={}}return __extends(n,t),n.prototype.setup=function(t){if("string"==typeof t[0])for(var n=0,e=t.length;e>n;n++)t[n]={src:t[n]};return"src"in t[0]&&(this._dataset=t),this},n.prototype.exec=function(){var t=this,n=this._dataset.length,e=0,i=[],o=[];for(e=0;n>e;e++){var r=new Image;r.onerror=function(){delete this.onerror,o.push("load error: ",this.src)},r.src=this._dataset[e].src,i.push(r),"id"in this._dataset[e]&&(this._ids[this._dataset[e].id]=this._dataset[e])}return setTimeout(function(){var r=0;for(e=0;n>e;e++){var s=i[e];if(!s.complete)break;r++}if(n>r)setTimeout(arguments.callee,100);else if(o.length)"console"in window?console.log("ImageAssets :",o):alert(o);else{for(e=0;n>e;e++)t._dataset[e].data=i[e];setTimeout(function(){t.__done(t)},1)}},100),this},n.prototype.getById=function(t){return this._ids[t]},n}(i);t.ImageAssets=r;var s=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.setup=function(t){var n=Math.random()*t.length|0,e=t[n];return this._dataset=[e],this},n.prototype.getData=function(){return this._dataset[0]},n.prototype.getAt=function(){return this._dataset[0]},n}(r);t.RandomImageAssets=s;var u=function(){function t(){this.FPS=33,this._count=0,this._observers=[]}return t.instanceById=function(n){return t._instance[n]||(t._instance[n]=new t),t._instance[n]},t.prototype.add=function(t){return-1===this._observers.indexOf(t)&&this._observers.push(t),this},t.prototype.remove=function(t){var n=this._observers.indexOf(t);return-1!==n&&this._observers.splice(n,1),this},t.prototype.start=function(t){var n=this;arguments.length&&(this.FPS=t),this.stop(),this._timer=setInterval(function(){n._update()},this.FPS)},t.prototype.stop=function(){clearInterval(this._timer)},t.prototype._update=function(){for(var t=0,n=this._observers.length;n>t;t++)this._observers[t].update(this._count);this._count++},t._instance={},t}();t.Ticker=u;var h=function(){function t(t,n){this._listeners=[],this._size=0,this.reset(t,n)}return t.prototype.add=function(t,n){return n in t&&(this._listeners.push({listener:t,func:n}),this._size=this._listeners.length),this},t.prototype.remove=function(t,n){if(n in t)for(var e=0;e<this._size;e++){var i=this._listeners[0];if(n in i.listener&&i.func===n&&i.listener===t){this._listeners.splice(e,1),this._size=this._listeners.length;break}}return this},t.prototype.reset=function(t,n){return this._count=t||60,this._interval=n||1e3,this},t.prototype.start=function(){var t=this;return this._timer||(this._onTick(),this._timer=setInterval(function(){t._count--,t._onTick()},this._interval)),this},t.prototype._onTick=function(){this._count<=0&&(this._count=0,this.stop());for(var t=0;t<this._size;t++){var n=this._listeners[0],e={target:this,count:this._count};n.listener[n.func](e)}},t.prototype.stop=function(){return this._timer&&(clearInterval(this._timer),this._timer=null),this},t.prototype.dispose=function(){for(this.stop();this._listeners.length;)this._listeners.pop()},t.prototype.getCount=function(){return this._count},t.prototype.formatTime=function(){var t=this._count/60>>0,n=this._count%60;return t+":"+(10>n?"0":"")+n},t}();t.CountdownTimer=h;var a=function(){function t(t){var n=this;this.MAX_COUNT=10,this._onDevicemotion=function(t){n._count<n.MAX_COUNT?t.acceleration?n._onFireAcceleration(t.acceleration):n._onFireAcceGravity(t.accelerationIncludingGravity):n._onFinish()},this._count=0,this.MAX_COUNT=t||30}return t.prototype.onFire=function(t){return this._onFireHandler=t,this},t.prototype.done=function(t){return this._onDone=t,this},t.prototype._onFireAcceleration=function(t){if(t.x+t.y+t.z>10){if(this._count++,!this._onFireHandler)return;this._onFireHandler(this._count,t.x,t.y,t.z)}},t.prototype._onFireAcceGravity=function(t){t.x>5&&(this._count++,this._onFireHandler(this._count,t.x,t.y,t.z))},t.prototype._onFinish=function(){this.stop(),this._onDone(),this._onDone=null,this._onFireHandler=null},t.prototype.finish=function(){this._onFinish()},t.prototype.stop=function(){window.removeEventListener("devicemotion",this._onDevicemotion)},t.prototype.exec=function(){var t=this;return setTimeout(function(){window.addEventListener("devicemotion",t._onDevicemotion)},1),this},t}();t.ShakeController=a;var c=function(){function t(){var t=this;this._onDevicemotion=function(n){if(t._onFireHandler){var e=n.accelerationIncludingGravity;t._onFireHandler(e.x,e.y,e.z)}}}return t.prototype.onFire=function(t){return this._onFireHandler=t,this},t.prototype.stop=function(){window.removeEventListener("devicemotion",this._onDevicemotion,!1)},t.prototype.finish=function(){this.stop(),this._onFireHandler=null},t.prototype.exec=function(){var t=this;if(!this._onFireHandler)throw new Error('set "onFire" handler');return setTimeout(function(){window.addEventListener("devicemotion",t._onDevicemotion)},1),this},t}();t.GravityController=c;var p=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.initView=function(t){return this.$view=t,this},n.prototype.move=function(t,n){return this.$view.xy(t,n),this},n.prototype.appear=function(t){return t&&t(),this},n.prototype.disappear=function(t){return t&&t(),this},n.prototype.appendTo=function(t){return this.$view.appendTo(t),this},n.prototype.prependTo=function(t){return this.$view.prependTo(t),this},n.prototype.active=function(){return this},n.prototype.deactive=function(){return this},n.prototype.none=function(){return this.$view.none(),this},n.prototype.block=function(){return this.$view.block(),this},n.prototype.visible=function(){return this.$view.visible(),this},n.prototype.hidden=function(){return this.$view.hidden(),this},n.prototype.remove=function(){return this.$view.remove(),this},n.prototype.dispose=function(){throw new Error("View#dispose")},n}(n);t.View=p;var f=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n}(p);t.Page=f;var _=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.newClip=function(t){return t==n.TYPE_IMAGE?new l:t==n.TYPE_CSS?new d:null},n.prototype.play=function(t,n){return this.stop(),n&&"splice"in n?0===n.length?this._playNormal(t):1===n.length?this._playNormal(t,n[0]):this._playRange(t,n):this._playNormal(t,n),this},n.prototype._playNormal=function(t,n){var e=this;n&&this.frame(n),this._timer=setInterval(function(){e.nextFrame()},t)},n.prototype._playRange=function(t,n){var e=this;this.stop();var i=0,o=n.length,r=this._frameLoop;this.frame(n[i]),this._timer=setInterval(function(){i=(i+1)%o,0!==i||r?e.frame(n[i]):clearInterval(e._timer)},t)},n.prototype.loop=function(t){return this._frameLoop=t,this},n.prototype.stop=function(){return this._timer&&(clearInterval(this._timer),this._timer=null),this},n.prototype.setup=function(){return this},n.prototype.frame=function(){return this},n.prototype.nextFrame=function(){return this},n.prototype.dispose=function(){},n.TYPE_IMAGE=0,n.TYPE_CSS=1,n}(p);t.Clip=_;var l=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.setup=function(t,n){return this._data=n,this._currentFrame=0,this._totalFrames=this._data.frames.length,this.$view=$("<"+t+"/>").css({width:n.size.w,height:n.size.h,position:"absolute",top:0,left:0,"background-image":"url("+n.src+")","background-position":"0 0"}),this},n.prototype.frame=function(t){this._currentFrame=t;var n=this._data.frames[this._currentFrame];if(!n)throw new Error('Clip#frame[ frame "'+t+'" not found. ]');var e=n.x+"px",i=n.y+"px";return this.$view.css({"background-position":e+" "+i}),this},n.prototype.nextFrame=function(){return this._currentFrame<this._totalFrames-1?this.frame(this._currentFrame+1):this._currentFrame==this._totalFrames-1&&this._frameLoop&&this.frame(0),this},n.prototype.dispose=function(){this.$view=null,this._data=null},n}(_);t.ClipWithImage=l;var d=function(t){function n(){t.apply(this,arguments)}return __extends(n,t),n.prototype.setup=function(t,n){return this._data=n,this._currentFrame=0,this._labels=this._data.frames,this._totalFrames=this._labels.length,this.$view=$("<"+t+"/>").addClass(this._labels[this._currentFrame]),this._data.id&&this.$view.addClass(this._data.id),this},n.prototype.frame=function(t){var n=this._currentFrame,e=isNaN(t)?this._labels.indexOf(t):int10(t);if(-1===e)throw new Error('Clip#frame[ frame label "'+t+'" not found. ]');return this._currentFrame=e,this.$view.removeClass(this._labels[n]).addClass(this._labels[e]),this},n.prototype.nextFrame=function(){return this._currentFrame<this._totalFrames-1?this.frame(this._labels[this._currentFrame+1]):this._currentFrame==this._totalFrames-1&&this._frameLoop&&this.frame(this._labels[0]),this},n.prototype.dispose=function(){this.$view.empty(),this.$view=null,this._data=null},n}(_);t.ClipWithCSS=d}(util||(util={}));